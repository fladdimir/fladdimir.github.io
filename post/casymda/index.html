<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Introducing Casymda | wh</title>
<meta name=keywords content="Python,SimPy,BPMN"><meta name=description content="A Python-Package for Animated Discrete-Event-Simulation based on BPMN and SimPy"><meta name=author content><link rel=canonical href=https://fladdimir.github.io/post/casymda/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://fladdimir.github.io/icon.png><link rel=icon type=image/png sizes=16x16 href=https://fladdimir.github.io/icon.png><link rel=icon type=image/png sizes=32x32 href=https://fladdimir.github.io/icon.png><link rel=apple-touch-icon href=https://fladdimir.github.io/apple-touch-icon.png><link rel=mask-icon href=https://fladdimir.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script data-goatcounter=https://fmghio.goatcounter.com/count async src=//gc.zgo.at/count.js></script><meta property="og:title" content="Introducing Casymda"><meta property="og:description" content="A Python-Package for Animated Discrete-Event-Simulation based on BPMN and SimPy"><meta property="og:type" content="article"><meta property="og:url" content="https://fladdimir.github.io/post/casymda/"><meta property="og:image" content="https://fladdimir.github.io/post/casymda/featured.gif"><meta property="article:section" content="post"><meta property="article:published_time" content="2020-03-20T00:00:00+00:00"><meta property="article:modified_time" content="2020-03-20T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fladdimir.github.io/post/casymda/featured.gif"><meta name=twitter:title content="Introducing Casymda"><meta name=twitter:description content="A Python-Package for Animated Discrete-Event-Simulation based on BPMN and SimPy"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://fladdimir.github.io/post/"},{"@type":"ListItem","position":2,"name":"Introducing Casymda","item":"https://fladdimir.github.io/post/casymda/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Introducing Casymda","name":"Introducing Casymda","description":"A Python-Package for Animated Discrete-Event-Simulation based on BPMN and SimPy","keywords":["Python","SimPy","BPMN"],"articleBody":"Discrete Event Simulation is a widespread tool for analysis and design of logistics systems.\nHowever, most industrial applications are realized using commercial simulators, and existing open-source alternatives still seem to lack some of the convenient features commercial packages are offering.\nThe Casymda-package strives to add some of these features, building on established standards such as BPMN and SimPy.\nThis post will introduce main features and show how to run a simple example.\nGet the repo.\nExisting Discrete Event Simulation Packages Current applications of DES go beyond the traditional usage for systems planning. They include more operational use-cases such as virtual commissioning or short-term forecasts \u0026 optimization. Consequently, simulation models are getting integrated tightly into other IT-systems. This allows to increase process transparency and to improve our means to analyze, control, and optimize system performance.\nMost industrial simulation uses are still based on commercial packages.\nAnd there are good reasons for this.\nIf you’ve already worked with commercial DES packages (such as Anylogic/Arena/ExtendSim/FlexSim/PlantSimulation/Simio/…YouNameIt), you probably learned to like some typical characteristics:\nblock-based graphical modeling of processes (often) vendor-specific scripting possibilities to define custom behavior and non-standard procedures (this is where things get fun) (3D) visualization / animation capabilities for debug / validation / presentation (fun as well, most of the time) domain-specific libraries with objects providing pre-built industry-specific behaviors (configuration and customization) interfacing options: spreadsheets, databases, socket, COM,… (what’s the last one?) However, there are a couple of open-source alternatives too.\nEven though they tend to lack some of the commercial features described above, there are upsides such as better scalability and simplified interfacing.\nRelated to Python there are (at least) two popular DES packages: Salabim and SimPy. Both are not only free and open-source, but even built on top of the standard library of one of the world’s most popular programming languages.\nCasymda: Features \u0026 Implementation Based on SimPy3, Casymda adds bits of complementing functionality to gain some of the modeling convenience of commercial “block-based” DES-packages.\nIt facilitates the usage of bpmn-process-descriptions to generate corresponding simulation-model python-code. .bpmn-files (basically xml) can easily be created with the Camunda-Modeler.\nThis graphical modeling helps to maintain an overview of the high-level model-structure. Generated Casymda-models also include a generic, token-like animation of simulated processes out-of-the-box, ready to be run in a web-browser. For presentation and debugging, animations can be paused and their speed can be changed dynamically. Solely animation-related events are not scheduled if the simulation is run without visualization. This maximizes the execution speed - which becomes especially important when a high number of runs is necessary.\nFurther features of Casymda include simulated movements along shortest paths in a 2D-tilemap-space, and gradual typing for development convenience (checkout pyright if you are using vscode).\nLet’s have a quick look at a simple example Casymda-model, illustrating some basic ideas.\nThe animation below shows a simple process consisting of 3 Casymda-blocks: Entities are created in a Source, pass a process-step called TilemapMovement, and leave the system via a Sink.\nTo run the example just enter the following command from within the repository and visit http://localhost:5000:\ndocker-compose up web-animation-tilemap-simple-process Created block-objects can be parametrized with arguments provided as text-annotations (e.g. the inter_arrival_time=100 [seconds] of the entities at the source). The naming of blocks is parsed following the pattern ClassName:instance_name. The default process-animation includes additional information on the processed entities and on the state of each block.\nThe way in which animations are created by Casymda is inspired by the Anylogic implementation. A web-server is running the actual simulation, and providing frame information to be rendered by a browser. The corresponding Casymda functionality is implemented using flask and pixijs.\nBelow you can find an tilemap-animation of the TilemapMovement process step of the model. As specified in the text-annotation, entities move from_node=\"A\", to_node=\"C\". Tilemaps can be provided in .csv format, with field values indicating possible origin/destination nodes (e.g. A, B, and C), passable nodes (0), and impassable nodes (1). The size of each tile is configured as part of the tilemap configuration. Shortest paths and distances between all origin/destination nodes are computed using networkx.\nTo run the tilemap animation example just enter the following command and visit: http://localhost:5000\ndocker-compose up web-animation-tilemap-simple Additional resources For additional information, feel free to have a look at other projects built with Casymda (German).\nInterested in machine-learning? The next post will show how to use a Casymda-model to train a reinforcement learning algorithm to solve a production logistics problem - stay tuned ;)\n","wordCount":"739","inLanguage":"en","datePublished":"2020-03-20T00:00:00Z","dateModified":"2020-03-20T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://fladdimir.github.io/post/casymda/"},"publisher":{"@type":"Organization","name":"wh","logo":{"@type":"ImageObject","url":"https://fladdimir.github.io/icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://fladdimir.github.io/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://fladdimir.github.io/tags/ title=/tags><span>/tags</span></a></li><li><a href=https://fladdimir.github.io/search title="/search (Alt + /)" accesskey=/><span>/search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://fladdimir.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://fladdimir.github.io/post/>Posts</a></div><h1 class=post-title>Introducing Casymda</h1><div class=post-meta><span title='2020-03-20 00:00:00 +0000 UTC'>March 20, 2020</span>&nbsp;·&nbsp;4 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#existing-discrete-event-simulation-packages>Existing Discrete Event Simulation Packages</a></li><li><a href=#casymda-features--implementation>Casymda: Features & Implementation</a></li><li><a href=#additional-resources>Additional resources</a></li></ul></nav></div></details></div><div class=post-content><p>Discrete Event Simulation is a widespread tool for analysis and design of logistics systems.<br>However, most industrial applications are realized using commercial simulators, and existing open-source alternatives still seem to lack some of the convenient features commercial packages are offering.<br>The <em>Casymda</em>-package strives to add some of these features, building on established standards such as BPMN and SimPy.</p><p>This post will introduce main features and show how to run a simple example.</p><p><img loading=lazy src=featured.gif alt=featured></p><blockquote><p>Get <a href=https://github.com/fladdimir/casymda>the repo</a>.</p></blockquote><h2 id=existing-discrete-event-simulation-packages>Existing Discrete Event Simulation Packages<a hidden class=anchor aria-hidden=true href=#existing-discrete-event-simulation-packages>#</a></h2><p>Current applications of DES go beyond the traditional usage for systems planning.
They include more operational use-cases such as virtual commissioning or short-term forecasts & optimization.
Consequently, simulation models are getting integrated tightly into other IT-systems.
This allows to increase process transparency and to improve our means to analyze, control, and optimize system performance.</p><p>Most industrial simulation uses are still based on commercial packages.</p><p>And there are good reasons for this.<br>If you&rsquo;ve already worked with commercial DES packages (such as Anylogic/Arena/ExtendSim/FlexSim/PlantSimulation/Simio/&mldr;YouNameIt), you probably learned to like some typical characteristics:</p><ul><li>block-based graphical modeling of processes</li><li>(often) vendor-specific scripting possibilities to define custom behavior and non-standard procedures (this is where things get fun)</li><li>(3D) visualization / animation capabilities for debug / validation / presentation (fun as well, most of the time)</li><li>domain-specific libraries with objects providing pre-built industry-specific behaviors (configuration and customization)</li><li>interfacing options: spreadsheets, databases, socket, COM,&mldr; (what&rsquo;s the last one?)</li></ul><p>However, there are a couple of open-source alternatives too.<br>Even though they tend to lack some of the commercial features described above, there are upsides such as better scalability and simplified interfacing.</p><p>Related to Python there are (at least) two popular DES packages: <a href=https://www.salabim.org/>Salabim</a> and <a href=https://simpy.readthedocs.io/en/latest/>SimPy</a>.
Both are not only free and open-source, but even built on top of the standard library of one of the world&rsquo;s most popular programming languages.</p><h2 id=casymda-features--implementation>Casymda: Features & Implementation<a hidden class=anchor aria-hidden=true href=#casymda-features--implementation>#</a></h2><p>Based on SimPy3, <a href=https://pypi.org/project/casymda/><em>Casymda</em></a> adds bits of complementing functionality to gain some of the modeling convenience of commercial &ldquo;block-based&rdquo; DES-packages.<br>It facilitates the usage of bpmn-process-descriptions to generate corresponding simulation-model python-code.
.bpmn-files (basically xml) can easily be created with the <a href=http://www.bpmn.io>Camunda-Modeler</a>.<br>This graphical modeling helps to maintain an overview of the high-level model-structure.
Generated Casymda-models also include a generic, token-like animation of simulated processes out-of-the-box, ready to be run in a web-browser.
For presentation and debugging, animations can be paused and their speed can be changed dynamically.
Solely animation-related events are not scheduled if the simulation is run without visualization.
This maximizes the execution speed - which becomes especially important when a high number of runs is necessary.<br>Further features of Casymda include simulated movements along shortest paths in a 2D-tilemap-space, and gradual typing for development convenience (checkout <a href=https://github.com/microsoft/pyright>pyright</a> if you are using <a href=https://code.visualstudio.com/docs/python/editing>vscode</a>).</p><p>Let&rsquo;s have a quick look at a <a href=https://github.com/fladdimir/casymda/tree/github/examples/tilemap>simple example Casymda-model</a>, illustrating some basic ideas.</p><p>The animation below shows a simple process consisting of 3 Casymda-<em>blocks</em>: <code>Entities</code> are created in a <code>Source</code>, pass a process-step called <code>TilemapMovement</code>, and leave the system via a <code>Sink</code>.</p><p><img loading=lazy src=./gifs/tilemap_process_simple_x50.gif alt="simple animated simulation process"></p><p>To run the example just enter the following command from within the repository and visit <a href=http://localhost:5000>http://localhost:5000</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker-compose up web-animation-tilemap-simple-process
</span></span></code></pre></div><p>Created block-objects can be parametrized with arguments provided as text-annotations (e.g. the <code>inter_arrival_time=100</code> [seconds] of the entities at the source).
The naming of blocks is parsed following the pattern <em>ClassName</em>:<em>instance_name</em>.
The default process-animation includes additional information on the processed entities and on the state of each block.</p><p>The way in which animations are created by Casymda is inspired by the <a href=https://cloud.anylogic.com/models>Anylogic implementation</a>.
A web-server is running the actual simulation, and providing frame information to be rendered by a browser.
The corresponding Casymda functionality is implemented using <a href=https://palletsprojects.com/p/flask/>flask</a> and <a href=https://www.pixijs.com/>pixijs</a>.</p><p>Below you can find an <em>tilemap-animation</em> of the <code>TilemapMovement</code> process step of the model. As specified in the text-annotation, entities move <code>from_node="A"</code>, <code>to_node="C"</code>.
Tilemaps can be provided in <code>.csv</code> format, with field values indicating possible origin/destination nodes (e.g. <code>A</code>, <code>B</code>, and <code>C</code>), passable nodes (<code>0</code>), and impassable nodes (<code>1</code>).
The size of each tile is configured as part of the tilemap configuration.
Shortest paths and distances between all origin/destination nodes are computed using <a href=https://networkx.github.io/>networkx</a>.</p><p><img loading=lazy src=./gifs/tilemap_simple_x10.gif alt="simple animated tilemap simulation"></p><p>To run the tilemap animation example just enter the following command and visit: <a href=http://localhost:5000>http://localhost:5000</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker-compose up web-animation-tilemap-simple
</span></span></code></pre></div><h2 id=additional-resources>Additional resources<a hidden class=anchor aria-hidden=true href=#additional-resources>#</a></h2><p>For additional information, feel free to have a look at <a href=https://casymda.github.io/page/Webpage/Startpage.html>other projects built with Casymda</a> (German).</p><p>Interested in machine-learning? The next post will show how to use a Casymda-model to train a reinforcement learning algorithm to solve a production logistics problem - stay tuned ;)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://fladdimir.github.io/tags/python/>Python</a></li><li><a href=https://fladdimir.github.io/tags/simpy/>SimPy</a></li><li><a href=https://fladdimir.github.io/tags/bpmn/>BPMN</a></li></ul><nav class=paginav><a class=prev href=https://fladdimir.github.io/post/tugger-routing/><span class=title>« Prev</span><br><span>Digital Twin for Assembly Line Material Provisioning Planning</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://fladdimir.github.io/>wh</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>